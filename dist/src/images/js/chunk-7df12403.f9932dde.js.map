{"version":3,"sources":["webpack:///./src/components/management/authorization.vue?02a3","webpack:///./src/components/management/authorization.vue","webpack:///./src/components/management/authorization.vue?6012"],"names":["class","_createElementVNode","style","_createElementBlock","_hoisted_2","_Fragment","_renderList","$data","r","key","id","selected","onClick","$options","_toDisplayString","name","description","_createVNode","_component_Button","color","size","_ctx","menu","chooseAll","expandAll","_component_Tree","option","multiple","choose-mode","$event","ref","user","data","role","roles","menuOption","datas","fullMenus","userOption","keyName","titleName","dataMode","parentName","getTotalDatas","callback","Request","Management","users","then","resp","ok","body","menus","mounted","this","init","methods","$refs","getRoles","changeRole","getData","length","$store","state","menuKeys","save","utils","saveLocal","dispatch","message","success","computed","__exports__","render"],"mappings":"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","file":"src/images/js/chunk-7df12403.f9932dde.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./authorization.vue?vue&type=style&index=0&id=dc87214c&lang=less\"","<style lang=\"less\">\n.authorization-vue {\n  .authorization-frame {\n    display: flex;\n    height: 68vh;\n    border: @border;\n    margin-bottom: 20px;\n    > div {\n      padding: 20px 15px;\n      border-right: @border;\n      flex: 1;\n      overflow: auto;\n      &:last-of-type {\n        border-right: none;\n      }\n      .h-tree-show-desc {\n        font-size: 14px;\n      }\n    }\n    .role-container {\n      padding: 0;\n      .role-item {\n        padding: 5px 10px;\n        border-bottom: @border;\n        &.selected,\n        &:hover {\n          background: @gray4-color;\n          cursor: pointer;\n        }\n        .title {\n          font-size: 16px;\n          font-weight: bold;\n          color: @dark-color;\n        }\n        .desc {\n          color: @dark2-color;\n        }\n      }\n    }\n  }\n}\n</style>\n<template>\n  <div class=\"authorization-vue frame-page h-panel\">\n    <div class=\"h-panel-bar\">\n      <span class=\"h-panel-title\">权限管理</span>\n      <span class=\"dark2-color\">保存示例是存储在Local Storage中，可通过清空 Local Storage 属性 SYS_CONFIG_MENU 重置菜单</span>\n    </div>\n    <div class=\"h-panel-body\">\n      <div class=\"authorization-frame\">\n        <div class=\"role-container\">\n          <div v-for=\"r of roles\" :key=\"r.id\" class=\"role-item\" :class=\"{ selected: role == r }\" @click=\"changeRole(r)\">\n            <p class=\"title\">{{ r.name }}</p>\n            <p class=\"desc\">{{ r.description }}</p>\n          </div>\n        </div>\n        <div class=\"menu-container\">\n          <div style=\"margin-bottom: 10px\">\n            <Button\n              color=\"primary\"\n              size=\"s\"\n              @click=\"\n                $refs.menu.chooseAll();\n                $refs.menu.expandAll();\n              \"\n              >全选</Button\n            >\n            <Button size=\"s\" @click=\"menus = []\">清空</Button>\n          </div>\n          <Tree :option=\"menuOption\" multiple choose-mode=\"some\" v-model=\"menus\" ref=\"menu\"></Tree>\n        </div>\n        <div class=\"users-container\">\n          <div style=\"margin-bottom: 10px\">\n            <Button\n              color=\"primary\"\n              size=\"s\"\n              @click=\"\n                $refs.user.chooseAll();\n                $refs.user.expandAll();\n              \"\n              >全选</Button\n            >\n            <Button size=\"s\" @click=\"users = []\">清空</Button>\n          </div>\n          <Tree :option=\"userOption\" multiple ref=\"user\" v-model=\"users\"></Tree>\n        </div>\n      </div>\n      <div class=\"text-center\">\n        <Button color=\"primary\" @click=\"save\">保存</Button>\n        <Button @click=\"getData\">重置</Button>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { fullMenus } from '@js/config/menu-config';\nimport Request from '@common/request';\nimport utils from '@common/utils';\nimport { message } from 'heyui';\n\nexport default {\n  data() {\n    return {\n      role: null,\n      roles: [],\n      menuOption: {\n        datas: fullMenus\n      },\n      userOption: {\n        keyName: 'id',\n        titleName: 'name',\n        dataMode: 'list',\n        parentName: 'parent',\n        getTotalDatas(callback) {\n          Request.Management.users().then(resp => {\n            if (resp.ok) {\n              callback(resp.body);\n            }\n          });\n        }\n      },\n      menus: [],\n      users: []\n    };\n  },\n  mounted() {\n    this.init();\n  },\n  methods: {\n    init() {\n      this.$refs.menu.expandAll();\n      this.getRoles();\n    },\n    changeRole(r) {\n      this.role = r;\n      this.getData(r);\n    },\n    getRoles() {\n      Request.Management.roles().then(resp => {\n        if (resp.ok) {\n          this.roles = resp.body;\n          if (this.roles.length) {\n            this.role = this.roles[0];\n            this.getData();\n          }\n        }\n      });\n    },\n    getData() {\n      this.menus = this.$store.state.menuKeys;\n    },\n    save() {\n      // 如果使用权限配置，配合后端获取请求的数据\n      // Request.Account.saveRoleConfig({roleId: this.role.id, menus: this.menus, roles: this.roles}).then(resp => {\n      //   if (resp.ok) {\n      //      this.$store.dispatch('updateMenuKeys', this.menus);\n      //      message.success('保存成功');\n      //   }\n      // });\n      utils.saveLocal('SYS_CONFIG_MENU', this.menus);\n      this.$store.dispatch('updateMenuKeys', this.menus);\n      message.success('保存成功');\n    }\n  },\n  computed: {}\n};\n</script>\n","import { render } from \"./authorization.vue?vue&type=template&id=dc87214c\"\nimport script from \"./authorization.vue?vue&type=script&lang=js\"\nexport * from \"./authorization.vue?vue&type=script&lang=js\"\n\nimport \"./authorization.vue?vue&type=style&index=0&id=dc87214c&lang=less\"\n\nimport exportComponent from \"C:\\\\OpenServer\\\\domains\\\\ui-admin.loc\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}